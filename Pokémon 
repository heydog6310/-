class MarsRover {
    constructor(gridSize, startX, startY) {
        this.gridSize = gridSize; // ç«æ˜Ÿåœ°åœ–å¤§å° NxN
        this.x = startX; // æ¢æ¸¬è»Šåˆå§‹ X ä½ç½®
        this.y = startY; // æ¢æ¸¬è»Šåˆå§‹ Y ä½ç½®
        this.direction = "E"; // åˆå§‹æ–¹å‘ (E = æ±, W = è¥¿, N = åŒ—, S = å—)
        this.obstacles = new Set(); // è¨˜éŒ„éšœç¤™ç‰©ä½ç½®
        console.log(`ğŸš€ æ¢æ¸¬è»Šå•Ÿå‹•ï¼Œåˆå§‹ä½ç½®: (${this.x}, ${this.y})ï¼Œæ–¹å‘: ${this.direction}`);
    }

    // æ–°å¢éšœç¤™ç‰©
    addObstacle(x, y) {
        this.obstacles.add(`${x},${y}`);
        console.log(`ğŸª¨ éšœç¤™ç‰©è¨­ç½®æ–¼: (${x}, ${y})`);
    }

    // è¨ˆç®—ä¸‹ä¸€æ­¥çš„ä½ç½®
    getNextPosition() {
        let nextX = this.x, nextY = this.y;
        if (this.direction === "E") nextX += 1;
        else if (this.direction === "W") nextX -= 1;
        else if (this.direction === "N") nextY -= 1;
        else if (this.direction === "S") nextY += 1;
        return [nextX, nextY];
    }

    // æª¢æŸ¥å‰æ–¹æ˜¯å¦æœ‰éšœç¤™ç‰©
    isObstacleAhead() {
        let [nextX, nextY] = this.getNextPosition();
        return this.obstacles.has(`${nextX},${nextY}`);
    }

    // è®Šæ›´æ–¹å‘ (é †æ™‚é‡æ—‹è½‰)
    turnRight() {
        const directions = ["N", "E", "S", "W"];
        let index = directions.indexOf(this.direction);
        this.direction = directions[(index + 1) % 4];
        console.log(`ğŸ”„ è½‰å‘è‡³: ${this.direction}`);
    }

    // æ¢æ¸¬è»Šç§»å‹• (é‡åˆ°éšœç¤™ç‰©å‰‡å³è½‰)
    move() {
        if (this.isObstacleAhead()) {
            console.log(`âš ï¸ å‰æ–¹æœ‰éšœç¤™ç‰©ï¼å˜—è©¦è½‰å‘`);
            this.turnRight();
        } else {
            let [newX, newY] = this.getNextPosition();
            this.x = newX;
            this.y = newY;
            console.log(`ğŸš— æ¢æ¸¬è»Šç§»å‹•è‡³: (${this.x}, ${this.y})ï¼Œæ–¹å‘: ${this.direction}`);
        }
    }

    // é€£çºŒç§»å‹•æ¸¬è©¦
    autoNavigate(steps) {
        console.log("=== ğŸ”´ è‡ªå‹•é¿éšœæ¸¬è©¦é–‹å§‹ ===");
        for (let i = 0; i < steps; i++) {
            this.move();
        }
        console.log("=== ğŸŸ¢ æ¸¬è©¦çµæŸ ===");
    }
}

// ğŸ”¥ æ¸¬è©¦ç«æ˜Ÿæ¢æ¸¬è»Šé¿éšœç³»çµ±
const rover = new MarsRover(10, 0, 0);
rover.addObstacle(2, 0); // åœ¨ (2,0) æ”¾ç½®éšœç¤™ç‰©
rover.addObstacle(3, 1); // åœ¨ (3,1) æ”¾ç½®éšœç¤™ç‰©
rover.autoNavigate(10); // è‡ªå‹•å°èˆª 10 æ­¥